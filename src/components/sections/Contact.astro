---
const cultivos = ["Caf√©", "Cacao", "Palta", "Pi√±a", "Papa", "Hortalizas", "Otro"];
---

<section id="contacto" class="py-24 bg-brand-dark relative overflow-hidden">
  <div class="max-w-4xl mx-auto px-4 relative z-10">
    <div class="bg-white rounded-[3rem] p-8 md:p-16 shadow-2xl">
      <div class="text-center mb-10">
        <h3 class="text-3xl font-black text-brand-dark uppercase italic mb-2">Solicitar Cotizaci√≥n</h3>
        <p class="text-brand-earth font-medium">Atendemos pedidos a todo el Per√∫ y Bolivia.</p>
      </div>

      <form id="whatsapp-form" class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="flex flex-col gap-2">
          <label class="text-xs font-black uppercase text-brand-green ml-2">Nombre Completo</label>
          <input id="nombre" type="text" required placeholder="Ej. Juan P√©rez" class="bg-brand-light p-4 rounded-2xl border-none focus:ring-2 focus:ring-brand-sun outline-none" />
        </div>
        <div class="flex flex-col gap-2">
          <label class="text-xs font-black uppercase text-brand-green ml-2">Celular / WhatsApp</label>
          <input id="telefono" type="tel" required placeholder="Ej. 900 000 000" class="bg-brand-light p-4 rounded-2xl border-none focus:ring-2 focus:ring-brand-sun outline-none" />
        </div>
        <div class="flex flex-col gap-2">
          <label class="text-xs font-black uppercase text-brand-green ml-2">Ubicaci√≥n / Ciudad</label>
          <input id="ciudad" type="text" required placeholder="Ej. Hu√°nuco, Per√∫" class="bg-brand-light p-4 rounded-2xl border-none focus:ring-2 focus:ring-brand-sun outline-none" />
        </div>
        <div class="flex flex-col gap-2">
          <label class="text-xs font-black uppercase text-brand-green ml-2">Tu Cultivo Principal</label>
          <select id="cultivo" class="bg-brand-light p-4 rounded-2xl border-none focus:ring-2 focus:ring-brand-sun outline-none appearance-none">
            {cultivos.map(c => <option value={c}>{c}</option>)}
          </select>
        </div>
        <div class="md:col-span-2 flex flex-col gap-2">
          <label class="text-xs font-black uppercase text-brand-green ml-2">Mensaje Adicional</label>
          <textarea id="mensaje" rows="4" placeholder="Ej. Necesito cotizar 20 sacos de Cosecha Verde..." class="bg-brand-light p-4 rounded-2xl border-none focus:ring-2 focus:ring-brand-sun outline-none"></textarea>
        </div>
        
        <button type="submit" class="md:col-span-2 bg-brand-sun text-white font-black py-5 rounded-2xl text-xl hover:bg-brand-dark transition-colors shadow-xl shadow-brand-sun/20 tracking-tighter uppercase italic flex justify-center items-center gap-2">
          <span>üöÄ</span> Enviar a WhatsApp
        </button>
      </form>
    </div>
    
    <div class="mt-12 text-center text-white/60 text-sm">
      <p>Planta de fabricaci√≥n: Huachipa, Lima - Per√∫.</p>
    </div>
  </div>
</section>

<script>
  // L√≥gica para enviar a WhatsApp
  const form = document.getElementById('whatsapp-form') as HTMLFormElement;

  if (form) {
    form.addEventListener('submit', (e) => {
      e.preventDefault(); // Evita que la p√°gina se recargue

      // 1. Capturar datos
      const nombre = (document.getElementById('nombre') as HTMLInputElement).value;
      const telefono = (document.getElementById('telefono') as HTMLInputElement).value;
      const ciudad = (document.getElementById('ciudad') as HTMLInputElement).value;
      const cultivo = (document.getElementById('cultivo') as HTMLSelectElement).value;
      const mensaje = (document.getElementById('mensaje') as HTMLTextAreaElement).value;

      // 2. N√∫mero de Luyasa (Formato internacional sin +)
      const numeroLuyasa = "51941234592"; 

      // 3. Crear el mensaje
      const texto = `Hola Agronegocios Luyasa! üå±%0A%0A*Soy:* ${nombre}%0A*Desde:* ${ciudad}%0A*Cultivo:* ${cultivo}%0A*Tel√©fono:* ${telefono}%0A%0A*Consulta:* ${mensaje}`;

      // 4. Abrir WhatsApp
      window.open(`https://wa.me/${numeroLuyasa}?text=${texto}`, '_blank');
    });
  }
</script>